{% extends "base.html" %}
{% block title %}资产管理{%endblock%}
{% block nax_asset %}active{% endblock%}
{% block jumbotron %}
       <table id="table_asset" class="table table-striped table-bordered table-hover table-condensed">
            <thead>
                <tr>
                    <th>主机名</th>
                    <th>IP</th>
                    <th>系统</th>
                    <th>架构</th>
                    <th>内存</th>
                    <th>CPU</th>
                    <th>磁盘</th>
                    <!--<th>purchase_time</th>-->
                    <!--<th>over_insurance</th>-->
                    <th>上架时间</th>
                    <th>更新时间</th>
                     <th>操作</th>
                </tr>
            </thead>
            <tbody>
                <!--{% for result in results %}-->
                    <!--<tr>-->
                        <!--<td>{{ result.name }}</td>-->
                        <!--<td>{{ result.ip }}</td>-->
                        <!--<td>{{ result.os }}</td>-->
                        <!--<td>{{ result.arch }}</td>-->
                        <!--<td>{{ result.mem }}</td>-->
                        <!--<td>{{ result.cpu }}</td>-->
                        <!--<td>{{ result.disk }}</td>-->
                        <!--&lt;!&ndash;<td>{{ result.purchase_time }}</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td>{{ result.over_insurance }}</td>&ndash;&gt;-->
                        <!--<td>{{ result.create_time }}</td>-->
                        <!--<td>{{ result.last_time }}</td>-->
                        <!--<td>操作</td>-->

                    <!--</tr>-->
                <!--{% endfor %}-->
                </tbody>
            </table>
{%endblock%}

{% block js %}
    var table = $('#table_asset').DataTable({
                         "language": {
                        "processing": "处理中...",
                        "lengthMenu": "显示 _MENU_ 项结果",
                        "zeroRecords": "没有匹配结果",
                        "info": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
                        "infoEmpty": "显示第 0 至 0 项结果，共 0 项",
                        "infoFiltered": "(由 _MAX_ 项结果过滤)",
                        "infoPostFix": "",
                        "search": "搜索:",
                        "searchPlaceholder": "搜索...",
                        "url": "",
                        "emptyTable": "表中数据为空",
                        "loadingRecords": "载入中...",
                        "infoThousands": ",",
                        "paginate": {
                            "first": "首页",
                            "previous": "上页",
                            "next": "下页",
                            "last": "末页"
                        },
                        "aria": {
                            paginate: {
                                first: '首页',
                                previous: '上页',
                                next: '下页',
                                last: '末页'
                            },
                            "sortAscending": ": 以升序排列此列",
                            "sortDescending": ": 以降序排列此列"
                        },
                        "decimal": "-",
                        "thousands": "."
                    },
                        ajax: { <!--定义一个ajax，为字典-->
                            url: '{% url "asset:list_ajax" %}', <!--定义一个跳转的URL-->
                            dataSrc: 'result',   <!--后端获取的值-->
                        },
                        columns: [
                        {"data":"name"},
                        {"data":"ip"},
                        {"data":"os"},
                        {"data":"arch"},
                        {"data":"mem"},
                        {"data":"cpu"},
                        {"data":"disk"},
                        {"data":"create_time"},
                        {"data":"last_time"},
                        {"data": function(row) {
                            return '<a class="btn btn-success btn-xs btn-edit-asset" href="javascript:void(0)" data-id="' + row['id'] + '">编辑</a>' +
                            '<a class="btn btn-danger btn-xs btn-delete-asset" href="javascript:void(0)" data-id="' + row['id'] + '">删除</a>';
                        }},
                        ]
                    });
    <!--jQuery('.btn-edit-asset').on('click',function() {-->
        <!--console.log('编辑');-->
    <!--})-->
jQuery('#table_asset').on('click','.btn-edit-asset',function() {
        console.log('编辑');
        table.ajax.reload(null, false);
    })
jQuery('#table_asset').on('click','.btn-delete-asset',function() {
        console.log('删除');
        table.ajax.reload(null, false);
    })



{% endblock %}